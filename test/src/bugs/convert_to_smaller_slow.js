import test from 'ava' ;
import * as integer from '../../../src' ;

test( '_convert_to_smaller_slow out of bound' , t => {

	const a = [
		78312951, 94374105, 26624213, 56693695,
		75296934, 52733292, 89892400, 54699504, 48281904,
		10809218, 85508125, 49276796, 87865021, 72206610,
		 5697942, 69159977, 94774286, 21492437, 39742495,
		34925480, 81393355, 36486614, 23554825, 86860493,
		 7638516, 79195555, 14338633,  4251794, 16199573,
		56267139, 43815017, 77069067, 65464041, 22569049,
		 9250901, 40595367, 27577914,   385664, 17176549,
		25188154, 66306515, 85000594, 30136354, 13339295,
		80846790, 75889458, 86325523, 25930160, 80454574,
		 5478079, 74084772, 68678456, 52611002, 86734364,
		67384514, 43111198, 61749912, 26407909, 12660282,
		88491445, 54448031, 14651560, 77560284, 52827888,
		17065922, 91075304, 62456048, 22864492, 57190597,
		90254267, 80332605, 71663268, 25184985, 64032247,
		17816350, 70011326, 89986917
	] ;

	const f = 94774286 ;
	const _t = 16 ;
	const n = a.length ;
	const m = Math.ceil( Math.log( f ) / Math.log( _t ) * n ) ;
	const b = integer._zeros( m ) ;

	integer._convert_to_smaller_slow(f, _t, a, 0, n, b, 0, m) ;

	t.is(undefined, b[-1]);

} ) ;
